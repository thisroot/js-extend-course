### CSS в JavaScript

Каждый фронтендщик каждый день пишет CSS. А CSS, как известно имеет много проблем, которые хотелось бы решить.

- Все стили в `CSS` глобальные. Если вы обьявили класс `.container` с какими то свойствами и Петя завтра сделал на вашем проекте тоже самое, то какие стили применятся? Ваши или Петины? Естественно, что глобальные стили это плохо и люди придумывают костыли в виде `BEMa`, например. Кто не работал с `BEM` - это когда вы создаете какой-то класс например `.authentication` и все стили дочерних классов вкладываете внутрь с префиксом `authentication`. Получается такой себе уникальный компонент, который можно реюзать. Это большой костыль, который еще и подают в виде методологии, которую нужно изучать. Все стили с BEM так и остаются глобальными и их можно переопределить. Мы же хотим писать классы и не думать о том, что они могут повториться, так как они должны быть уникальные.

- Мы имеем элемент у которого прописаны какие-то стили. И мы хотим в другом месте эти стили перекрыть. Обычно люди вкладывают елемент у которого они хотят переопределить стили в другой елемент и, так как вес селектора становится больше, то стили переопределяются. В большом проекте это слабо похоже на лаконичный код. Мы же хотим, чтобы переопределить стили можно было не в `css`, а до того, как `css` сбилдился. То есть чтобы на странице в `css` мы видели чистый и лаконичный код без переопределений.

- Мы хотим избавиться от important раз и навсегда.

Есть ли у нас кроссбраузерное решение этой проблемы? Конечно есть. Существует масса библиотек, где вы можете писать стили в `javascript` и они будут транспайлится либо в инлайн стили, либо в обычный css.

Рассмотрим библиотеку `aphrodite`, которую создали в `Khan Academy` и которая отлично работает как без реакта так и с `react`.

- Итак у нас проект, который  сгенерирован с помощью `create-react-app`.

- Давайте установим aphrodite.
```bash
    yarn add aphrodite
```
- Теперь импортируем функцию `css` из `aphrodite`.
```js
    import { css } from 'aphrodite';
```

- Все наши стили компонента `App` мы будем держать в файле `AppStyles`. Давай импортируем `StyleSheet` и добавим класс `container`.
```js
    import { StyleSheet } from 'aphrodite';

    export default StyleSheet.create({
        container: {
            background: '#bfbea7'
        }
    })
```

- Все стили, которые пишуться через тире будут писаться `camelCase`, а все значения строками. Как теперь использовать этот класс `container` в `App` компоненте?

```js
    <div className={css(styles.container)}>
    Our App
    </div>
```

- Мы просто в `className` передаем функцию `css` с параметром класса, который хотим применить.

Давайте посмотрим в браузер что у нас вышло. Как мы видим, наши стили применились. Наш контейнер теперь уникальный так как к нему добавился сгенерированный постфикс. Теперь даже если в другом месте кто-то использует класс `container`, то он тоже будет уникальный. Но почему же наш стиль написан с `important`? Потому что для более легкого перехода на `aphrodite` с проекта, который написан на обычном `css` все свойства добавляются автоматом с `important`. В этом нет ничего плохого, так как он просто сделан для перекрытия `css` стилей, но давайте его все таки уберем, так как у нас новый проект и нам он не нужен

Для этого просто вместо импорта из `aphrodite` будем импортить из `aphrodite/no-important`

```js
    import { css } from 'aphrodite/no-important';
    import { StyleSheet } from 'aphrodite/no-important';
```
Как мы видим, `important` убрался. Все стили, которые мы пишем добавляются в `head`, но без пробелов, чтобы страница загружалась быстрее.

Что еще нам дает `aphrodite?` Например `autoprefixer`. Давайте попробуем. Давайте нашему классу `container` добавим `display:flex`

```js
    export default StyleSheet.create({
        container: {
            background: '#bfbea7',
            display: 'flex'
        }
    })
```
В браузере мы видим, что стили сразу сгенерировались с префиксами для всех браузеров.

Что же по по поводу реюза классов без проблем, которые мы имеем в `CSS`? Давайте создадим черный квадрат, который мы будем реюзать в разных местах с разными размерами.

Давайте создадим файл `squareStyles`, который будет нашим шаред классом.

```js
    export const blackSquare = {
    background: 'black',
    width: '100px',
    height: '100px'
    borderRadius: '3px'
    };
```

Это обычный обьект с стилями. Ничего больше. Даже `aphrodite` мы не применяли. Теперь давайте выведем его в `App`.

```js
    <div className={css(styles.square)}/>
```
Мы просто добавили еще один класс из стилей `App`.

Теперь давайте импортируем `blackSquare` в стили `App` и подмешаем все стили из `blackSquare` с помощью spread из `ES7`.

```js
    import { StyleSheet } from 'aphrodite/no-important';
    import { blackSquare } from './squareStyles';

    export default StyleSheet.create({
        container: {
            background: '#bfbea7',
            display: 'flex'
        },

        square: {
            ...blackSquare
        }
    })
```

- Если мы посмотрим в браузер, то у нас вывелся черный квадрат. Теперь представим, что в всех местах он нам нужен `100x100`, а именно в `App 50x50`.
- Давайте просто перекроем стили в `square`.

```js
    square: {
    ...blackSquare,
    width: '50px',
    height: '50px'
    }
```

В браузере мы видим, что ширина и высота квадрата изменились. Давайте посмотрим на стили. Так как все стили у нас генерируются, то в браузере мы видим только результирующие стили. То есть ширина и высота задается только 1 раз. Никаких перекрытий стили по 20 раз с разным весом селекторов. Только один уникальный стиль.

Итак в этом уроке мы разобрали, почему писать `css` в `javascript` лучше и проще. Вам не нужно думать, что стили будут не уникальные или думать как перекрыть стили. Вы также никогда не будете писать `important`.
